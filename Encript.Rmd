---
title: "Encription"
description: Scientific and technical writing about DB standarization, native to the web
Date: "`r format(Sys.time(), '%d %B, %Y')`"
output: 
  html_document:
     css: styles.css
     self_contained: no
---



```{r setup, include=FALSE}
load("G:/Mi unidad/Alvacast/SISTRAT 2019 (github)/SUD_CL/.RData")
setwd("G:/Mi unidad/Alvacast/SISTRAT 2019 (github)/SUD_CL")
path <-"G:/Mi unidad/Alvacast/SISTRAT 2019 (github)/SUD_CL"
#Libraries used in the routine. Dont change the order
if(!require(kableExtra)){install.packages("kableExtra")}
if(!require(knitr)){install.packages("knitr")}
if(!require(tidyr)){install.packages("tidyr")}
if(!require(data.table)){install.packages("data.table")}
if(!require(DataExplorer)){install.packages("DataExplorer")}
if(!require(stringi)){install.packages("stringi")}
if(!require(stringr)){install.packages("stringr")}
if(!require(ggplot2)){install.packages("ggplot2")}
if(!require(dplyr)){install.packages("dplyr")}
if(!require(Hmisc)){install.packages("Hmisc")}
if(!require(kableExtra)){install.packages("kableExtra")}
if(!require(gmodels)){install.packages("summarytools")}
if(!require(shiny)){install.packages("shiny")}
if(!require(ExPanDaR)){install.packages("ExPanDaR")}

knitr::opts_chunk$set(echo = TRUE)
```

### Summary

We conducted a direct deterministic linkage process by the encryption of the patient’s ID by commissioning the development of an offline web application to a third party. This program normalizes each RUT to a standardized format and then transforms them into a hash code through an algorithm MD5 encryption methods. The generated hash is encrypted using a secret key (“salt key") only known by the developer and the counterparts of SENDA and DEIS, in order to ensure the protection patient’s identity (see Bioethical considerations).

### Previous setting for encription

On each center, it is necessary to define processes and actors involved in them. This means that it is necessary to identify roles (informatics, users, permissions)
The encription required to define scopes in terms of the resources (characteristics of the datasets, character codification formats), ethical considerations of personal information contained in them, and characteristics of computers in which program will be excecuted. Also is necessary to define how the dataset will be obtained (yearly, by indices measured, etc.), range of time, format (.txt, .csv and how is separated)

Once these concerns are resolved, it is recommended that the analysits may explore how RUTs are formatted and distributed, in order to make some adjustments to the program if is required, or considering to transform RUTs under different assumptions. This process is very important because the quality of the linkage may not depend on how same RUTs were written if they corresponds to the same patient. If it is posisble, create an address book or a sample line with brief information about the characteristics of the dataset.

### Program Structure and RUT normalization

THe program encripts the RUT with the MD5 algorithm, but also incluiding a secret key that is concatenated as as suffix of each RUT, which makes their disencryptation less probable (We recommend a key of at least 30 characters composed of alphanumeric characters).

The process of normalization of RUTs to standardized their format is explained in the following diagram:

![Diagram](Figures/diagram.png)
