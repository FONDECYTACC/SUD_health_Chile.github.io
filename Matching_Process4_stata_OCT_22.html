<head>
  <link rel="stylesheet" type="text/css" href="stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
</head>
<head>
  <link rel="stylesheet" type="text/css" href="stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
</head>
<head>
  <link rel="stylesheet" type="text/css" href="stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
</head>
<head>
  <link rel="stylesheet" type="text/css" href="stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
</head>
<head>
  <link rel="stylesheet" type="text/css" href="stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
</head>
<h1><a href="#database-step-2" id="database-step-2">Database (step 2)</a></h1>
<p>Date created:  16:02:58 16 Oct 2022.</p>
<p>Install commands that are unavailable or out of date.</p>
<pre><code>. *&lt;&lt; dd_do : noout &gt; &gt;
. clear all

. 
. cap noi which predictms
C:\Users\CISS Fondecyt\ado\plus\p\predictms.ado
*! version 4.4.0 22dec2021 MJC

. if _rc==111 {
.         cap noi net install multistate, from(&quot;https://www.mjcrowther.co.uk/code/multistate&quot;) 
.         }

. cap noi which merlin
C:\Users\CISS Fondecyt\ado\plus\m\merlin.ado
*! version 2.1.5 18mar2022 MJC

. if _rc==111 {
.         cap noi net install merlin, from(&quot;https://www.mjcrowther.co.uk/code/merlin/&quot;) 
.         }

. cap noi which sumat
C:\Users\CISS Fondecyt\ado\plus\s\sumat.ado
*! Part of package matrixtools v. 0.25
*! Support: Niels Henrik Bruun, niels.henrik.bruun@gmail.com
*! 2021-01-03 toxl added

. if _rc==111 {
.         cap noi scc install matrixtools
.         }

. cap noi which estwrite
C:\Users\CISS Fondecyt\ado\plus\e\estwrite.ado
*! version 1.2.4 04sep2009
*! version 1.0.1 15may2007 (renamed from -eststo- to -estwrite-; -append- added)
*! version 1.0.0 29apr2005 Ben Jann (ETH Zurich)

. if _rc==111 {
.         cap noi ssc install estwrite
.         }

. cap noi which winsor2
C:\Users\CISS Fondecyt\ado\plus\w\winsor2.ado
*! Inspirit of -winsor-(NJ Cox) and -winsorizeJ-(J Caskey)
*! Lian Yujun, arlionn@163.com, 2013-12-25
*! 1.1 2014.12.16

. if _rc==111 {
.         cap noi ssc install winsor2
.         }       

.         
</code></pre>
<p>We need to obtain the file and the work folder.</p>
<pre><code>. mata : st_numscalar(&quot;OK&quot;, direxists(&quot;/volumes/sdrive/data//&quot;))

. if scalar(OK) == 1 {
.         cap noi cd &quot;/volumes/sdrive/data//&quot;
.         global pathdata &quot;/volumes/sdrive/data//&quot;
.         di &quot;Location= ${pathdata}; Date: `c(current_date)', considering an OS `c(os)' for the user: `c(username)'&quot;
. }

. else display &quot;This file does not exist&quot;
This file does not exist

. 
. mata : st_numscalar(&quot;OK&quot;, direxists(&quot;E:\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags\&quot;))

. if scalar(OK) == 1 {
.         cap noi cd &quot;E:\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags&quot;
.         global pathdata &quot;E:\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags&quot;
.         global pathdata2 &quot;E:/Mi unidad/Alvacast/SISTRAT 2019 (github)/_mult_state_ags/&quot;
.         di &quot;Location= ${pathdata}; Date: `c(current_date)', considering an OS `c(os)' for the user: `c(username)'&quot;
. }

. else display &quot;This file does not exist&quot;
This file does not exist

. 
. mata : st_numscalar(&quot;OK&quot;, direxists(&quot;G:\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags\&quot;))

. if scalar(OK) == 1 {
.         cap noi cd &quot;G:\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags&quot;
.         global pathdata &quot;G:\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags&quot;
.         global pathdata2 &quot;G:/Mi unidad/Alvacast/SISTRAT 2019 (github)/_mult_state_ags/&quot;
.         di &quot;Location= ${pathdata}; Date: `c(current_date)', considering an OS `c(os)' for the user: `c(username)'&quot;
. }

. else display &quot;This file does not exist&quot;
This file does not exist

.                 
. mata : st_numscalar(&quot;OK&quot;, direxists(&quot;C:\Users\CISS Fondecyt\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags\&quot;))

. if scalar(OK) == 1 {
.         cap noi cd &quot;C:\Users\CISS Fondecyt\Mi unidad\Alvacast\SISTRAT 2019 (github)&quot;
C:\Users\CISS Fondecyt\Mi unidad\Alvacast\SISTRAT 2019 (github)
.         global pathdata &quot;C:\Users\CISS Fondecyt\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags&quot;
.         global pathdata2 &quot;C:/Users/CISS Fondecyt/Mi unidad/Alvacast/SISTRAT 2019 (github)/_mult_state_ags/&quot;
.         di &quot;Location= ${pathdata}; Date: `c(current_date)', considering an OS `c(os)' for the user: `c(username)'&quot;
Location= C:\Users\CISS Fondecyt\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags; Date: 16 Oct 2022, considering an OS Windows for
&gt;  the user: CISS Fondecyt
. }

. else display &quot;This file does not exist&quot;

. 
. mata : st_numscalar(&quot;OK&quot;, direxists(&quot;C:\Users\andre\Desktop\_mult_state_ags\&quot;))

. if scalar(OK) == 1 {
.         cap noi cd &quot;C:\Users\andre\Desktop\_mult_state_ags&quot;
.         global pathdata &quot;C:\Users\andre\Desktop\_mult_state_ags&quot;
.         global pathdata2 &quot;C:/Users/andre/Desktop/_mult_state_ags/&quot;
.         di &quot;Location= ${pathdata}; Date: `c(current_date)', considering an OS `c(os)' for the user: `c(username)'&quot;
. }

. else display &quot;This file does not exist&quot;
This file does not exist

. 
. mata : st_numscalar(&quot;OK&quot;, direxists(&quot;C:\Users\CISS Fondecyt\OneDrive\Documentos\&quot;))

. if scalar(OK) == 1 {
.         cap noi cd &quot;C:\Users\CISS Fondecyt\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags&quot;
C:\Users\CISS Fondecyt\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags
.         global pathdata &quot;C:\Users\CISS Fondecyt\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags&quot;
.         global pathdata2 &quot;C:/Users/CISS Fondecyt/Mi unidad/Alvacast/SISTRAT 2019 (github)/_mult_state_ags/&quot;
.         di &quot;Location= ${pathdata}; Date: `c(current_date)', considering an OS `c(os)' for the user: `c(username)'&quot;
Location= C:\Users\CISS Fondecyt\Mi unidad\Alvacast\SISTRAT 2019 (github)\_mult_state_ags; Date: 16 Oct 2022, considering an OS Windows for
&gt;  the user: CISS Fondecyt
. }

. else display &quot;This file does not exist&quot;

. 
</code></pre>
<head>
  <link rel="stylesheet" type="text/css" href="stmarkdown.css">
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
</script>
</head>
<p>Path data= C:\Users\CISS Fondecyt\Mi unidad\Alvacast\SISTRAT 2019 (github)_mult_state_ags;</p>
<p>Timestamp: 16 Oct 2022, considering that is a Windows OS for the username: CISS Fondecyt</p>
<p>The file is located and named as: C:/Users/CISS Fondecyt/Mi unidad/Alvacast/SISTRAT 2019 (github)/_mult_state_ags/archivo_multiestado1_oct_22_corr3_3y.dta</p>
<p>variable _t_scaled already defined</p>
<p>Defined a transition matrix.</p>
<h1><a href="#">=============================================================================</a></h1>
<p>.         gen timevar01 = timevar0/365.25 variable timevar01 already defined r(110);</p>
<p>.         gen _t_scaled= _t/365.25 variable _t_scaled already defined r(110);</p>
<p>. *a= Ambulatory . *b= residential . . *.24640657 =90 days . *.48537963 = 6 months . *.98987835 = 1 year . *3.0078732 = 3 years . *4.9993157 = 5 years</p>
<pre><code>. qui estread &quot;${pathdata2}parmodels_m2_jun_22_corr3.sters&quot;

. 
. predictms, transmatrix(mat_nine_states) models(m2_1_gom m2_2_gom m2_3_logn m2_4_ggam m2_5_ggam m2_6_ggam m2_7_weib m2_8_logl) ///
&gt;         timevar(timevar0) /// mint(0) maxt(1826) timevar() cannot be specified with mint()/maxt()/obs()
&gt;         seed(2125) n($sim) prob los /// * si agrego bootstrap, at#() limit reached, or unrecognised option
&gt;         from(2) ci level(83) at1(tipo_de_plan_res_1 0  _start 1096) at2(tipo_de_plan_res_1 1  _start 1096) reset bootstrap m($boots)   //
&gt; * es una forma de hacer bootstrap 

Calculating CIs via parametric bootstrap for at1() (1000)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500
..................................................   550
..................................................   600
..................................................   650
..................................................   700
..................................................   750
..................................................   800
..................................................   850
..................................................   900
..................................................   950
..................................................  1000

Calculating CIs via parametric bootstrap for at2() (1000)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500
..................................................   550
..................................................   600
..................................................   650
..................................................   700
..................................................   750
..................................................   800
..................................................   850
..................................................   900
..................................................   950
..................................................  1000

. 
</code></pre>
<pre><code>. rename (_prob_at1_2_*lci) (fprob_from2a_*lci_3y_83)

. rename (_prob_at1_2_*uci) (fprob_from2a_*uci_3y_83)

. rename (_prob_at1_2_*) (fprob_from2a_*_3y_83)

. 
. rename (_los_at1_2_*lci) (flos_from2a_*lci_3y_83)

. rename (_los_at1_2_*uci) (flos_from2a_*uci_3y_83)

. rename (_los_at1_2_*) (flos_from2a_*_3y_83)

. 
. rename (_prob_at2_2_*lci) (fprob_from2b_*lci_3y_83)

. rename (_prob_at2_2_*uci) (fprob_from2b_*uci_3y_83)

. rename (_prob_at2_2_*) (fprob_from2b_*_3y_83)

. 
. rename (_los_at2_2_*lci) (flos_from2b_*lci_3y_83)

. rename (_los_at2_2_*uci) (flos_from2b_*uci_3y_83)

. rename (_los_at2_2_*) (flos_from2b_*_3y_83)

. 
. 
. qui estread &quot;${pathdata2}parmodels_m2_jun_22_corr3.sters&quot;

. 
. predictms, transmatrix(mat_nine_states) models(m2_1_gom m2_2_gom m2_3_logn m2_4_ggam m2_5_ggam m2_6_ggam m2_7_weib m2_8_logl) ///
&gt;         timevar(timevar0) /// mint(0) maxt(1826) timevar() cannot be specified with mint()/maxt()/obs()
&gt;         seed(2125) n($sim) prob los /// * si agrego bootstrap, at#() limit reached, or unrecognised option
&gt;         from(3) ci level(83) at1(tipo_de_plan_res_1 0  _start 1096) at2(tipo_de_plan_res_1 1  _start 1096) reset bootstrap m($boots)   //
&gt; * es una forma de hacer bootstrap 

Calculating CIs via parametric bootstrap for at1() (1000)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500
..................................................   550
..................................................   600
..................................................   650
..................................................   700
..................................................   750
..................................................   800
..................................................   850
..................................................   900
..................................................   950
..................................................  1000

Calculating CIs via parametric bootstrap for at2() (1000)
----+--- 1 ---+--- 2 ---+--- 3 ---+--- 4 ---+--- 5 
..................................................    50
..................................................   100
..................................................   150
..................................................   200
..................................................   250
..................................................   300
..................................................   350
..................................................   400
..................................................   450
..................................................   500
..................................................   550
..................................................   600
..................................................   650
..................................................   700
..................................................   750
..................................................   800
..................................................   850
..................................................   900
..................................................   950
..................................................  1000

. 
</code></pre>
<pre><code>. rename (_prob_at1_3_*lci) (fprob_from3a_*lci_3y_83)

. rename (_prob_at1_3_*uci) (fprob_from3a_*uci_3y_83)

. rename (_prob_at1_3_*) (fprob_from3a_*_3y_83)

. 
. rename (_los_at1_3_*lci) (flos_from3a_*lci_3y_83)

. rename (_los_at1_3_*uci) (flos_from3a_*uci_3y_83)

. rename (_los_at1_3_*) (flos_from3a_*_3y_83)

. 
. rename (_prob_at2_3_*lci) (fprob_from3b_*lci_3y_83)

. rename (_prob_at2_3_*uci) (fprob_from3b_*uci_3y_83)

. rename (_prob_at2_3_*) (fprob_from3b_*_3y_83)

. 
. rename (_los_at2_3_*lci) (flos_from3b_*lci_3y_83)

. rename (_los_at2_3_*uci) (flos_from3b_*uci_3y_83)

. rename (_los_at2_3_*) (flos_from3b_*_3y_83)

. 
</code></pre>
<p>Saved at= 04:00:35 17 Oct 2022</p>
<pre><code>
</code></pre>
<h4><a href="#probabilities-first-patient-third-transition" id="probabilities-first-patient-third-transition">Probabilities_First patient_Third transition</a></h4>
<pre><code>. foreach var of varlist fprob_from2a_4_3y_83 fprob_from2a_4_lci_3y_83 fprob_from2a_4_uci_3y_83 fprob_from2b_4_3y_83 fprob_from2b_4_lci_3y_
&gt; 83 fprob_from2b_4_uci_3y_83 {
  2.                                 scalar variable = &quot;`var'&quot;
  3.                                         qui summarize `var' if inrange(timevar01, .32, .34)
  4.                                         scalar e3m_`var' = round(round(r(mean),.001)*100,.1)
  5.                                         qui summarize `var' if inrange(timevar01, .999, 1.02)
  6.                                         scalar e1y_`var' = round(round(r(mean),.001)*100,.1)
  7.                                         qui summarize `var' if inrange(timevar01, 2.99, 3.02)
  8.                                         scalar e3y_`var' = round(round(r(mean),.001)*100,.1)
  9.                                         qui summarize `var' if inrange(timevar01,  4.999, 5.02)
 10.                                         scalar e5y_`var' = round(round(r(mean),.001)*100,.1)
 11.          cap noi matrix ests_`var' = (`=scalar(e3m_`var')'\  `=scalar(e1y_`var')'\ `=scalar(scalar(e3y_`var'))'\ `=scalar(scalar(e5y_`
&gt; var'))')
 12.          matrix colnames ests_`var' = `var'
 13.          matrix rownames ests_`var' = 3_mths 1_yr 3_yrs 5_yrs
 14.  }

. 
. matrix est_bs32 = (ests_fprob_from2a_4_3y_83, ests_fprob_from2a_4_lci_3y_83, ests_fprob_from2a_4_uci_3y_83, ests_fprob_from2b_4_3y_83, es
&gt; ts_fprob_from2b_4_lci_3y_83, ests_fprob_from2b_4_uci_3y_83)

. matrix colnames est_bs32 = Out Out_lci Out_uci Res Res_lci Res_uci

. 
. esttab matrix(est_bs32) using &quot;${pathdata2}pr_3rd_transition_1st_pat_22_2corr3_83.html&quot;, replace 
(output written to C:/Users/CISS Fondecyt/Mi unidad/Alvacast/SISTRAT 2019 (github)/_mult_state_ags/pr_3rd_transition_1st_pat_22_2corr3_83.h
&gt; tml)

</code></pre>
<p>The transition probabilities are presented here:</p>
<table border="0" width="*">
<tr><td colspan=7><hr></td></tr>
<tr><td>            </td><td>    est_bs32</td><td>            </td><td>            </td><td>            </td><td>            </td><td>            </td></tr>
<tr><td>            </td><td>         Out</td><td>     Out_lci</td><td>     Out_uci</td><td>         Res</td><td>     Res_lci</td><td>     Res_uci</td></tr>
<tr><td colspan=7><hr></td></tr>
<tr><td>3_mths      </td><td>         5.8</td><td>         4.7</td><td>         7.1</td><td>        12.2</td><td>        10.2</td><td>        14.5</td></tr>
<tr><td>1_yr        </td><td>        11.2</td><td>         9.4</td><td>        13.3</td><td>        20.8</td><td>        17.9</td><td>          24</td></tr>
<tr><td>3_yrs       </td><td>        18.7</td><td>        16.1</td><td>        21.5</td><td>        30.6</td><td>        27.1</td><td>        34.4</td></tr>
<tr><td>5_yrs       </td><td>        20.4</td><td>        17.9</td><td>        23.2</td><td>        31.1</td><td>          28</td><td>        34.4</td></tr>
<tr><td colspan=7><hr></td></tr>
</table>
<h4><a href="#probabilities-first-patient-fourth-transition" id="probabilities-first-patient-fourth-transition">Probabilities_First patient_Fourth transition</a></h4>
<pre><code>. foreach var of varlist fprob_from3a_5_3y_83 fprob_from3a_5_lci_3y_83 fprob_from3a_5_uci_3y_83 fprob_from3b_5_3y_83 fprob_from3b_5_lci_3y_
&gt; 83 fprob_from3b_5_uci_3y_83 {
  2.                                 scalar variable = &quot;`var'&quot;
  3.                                         qui summarize `var' if inrange(timevar01, .32, .34)
  4.                                         scalar e3m_`var' = round(round(r(mean),.001)*100,.1)
  5.                                         qui summarize `var' if inrange(timevar01, .999, 1.02)
  6.                                         scalar e1y_`var' = round(round(r(mean),.001)*100,.1)
  7.                                         qui summarize `var' if inrange(timevar01, 2.99, 3.02)
  8.                                         scalar e3y_`var' = round(round(r(mean),.001)*100,.1)
  9.                                         qui summarize `var' if inrange(timevar01,  4.999, 5.02)
 10.                                         scalar e5y_`var' = round(round(r(mean),.001)*100,.1)
 11.          cap noi matrix ests_`var' = (`=scalar(e3m_`var')'\  `=scalar(e1y_`var')'\ `=scalar(scalar(e3y_`var'))'\ `=scalar(scalar(e5y_`
&gt; var'))')
 12.          matrix colnames ests_`var' = `var'
 13.          matrix rownames ests_`var' = 3_mths 1_yr 3_yrs 5_yrs
 14.  }

. 
. matrix est_ds22 = (ests_fprob_from3a_5_3y_83, ests_fprob_from3a_5_lci_3y_83, ests_fprob_from3a_5_uci_3y_83, ests_fprob_from3b_5_3y_83, es
&gt; ts_fprob_from3b_5_lci_3y_83, ests_fprob_from3b_5_uci_3y_83)

. matrix colnames est_ds22 = Out Out_lci Out_uci Res Res_lci Res_uci

. 
. esttab matrix(est_ds22) using &quot;${pathdata2}pr_4th_transition_1st_pat_22_2corr3_83.html&quot;, replace 
(output written to C:/Users/CISS Fondecyt/Mi unidad/Alvacast/SISTRAT 2019 (github)/_mult_state_ags/pr_4th_transition_1st_pat_22_2corr3_83.h
&gt; tml)

</code></pre>
<p>The transition probabilities are presented here:</p>
<table border="0" width="*">
<tr><td colspan=7><hr></td></tr>
<tr><td>            </td><td>    est_ds22</td><td>            </td><td>            </td><td>            </td><td>            </td><td>            </td></tr>
<tr><td>            </td><td>         Out</td><td>     Out_lci</td><td>     Out_uci</td><td>         Res</td><td>     Res_lci</td><td>     Res_uci</td></tr>
<tr><td colspan=7><hr></td></tr>
<tr><td>3_mths      </td><td>        12.3</td><td>        10.5</td><td>        14.5</td><td>        21.7</td><td>        18.8</td><td>        24.8</td></tr>
<tr><td>1_yr        </td><td>        21.1</td><td>        18.4</td><td>          24</td><td>          33</td><td>        29.5</td><td>        36.6</td></tr>
<tr><td>3_yrs       </td><td>          30</td><td>        26.9</td><td>        33.2</td><td>        41.7</td><td>        38.3</td><td>        45.2</td></tr>
<tr><td>5_yrs       </td><td>        31.3</td><td>        28.4</td><td>        34.2</td><td>        41.1</td><td>        38.2</td><td>        44.1</td></tr>
<tr><td colspan=7><hr></td></tr>
</table>
<h4><a href="#length-of-stay-first-patient-second-transition" id="length-of-stay-first-patient-second-transition">Length_of_stay_First patient_Second transition</a></h4>
<pre><code>. foreach var of varlist flos_from2a_2_3y_83 flos_from2a_2_lci_3y_83 flos_from2a_2_uci_3y_83 flos_from2b_2_3y_83 flos_from2b_2_lci_3y_83 fl
&gt; os_from2b_2_uci_3y_83 {
  2.         scalar variable = &quot;`var'&quot;
  3.                                         qui summarize `var' if inrange(timevar01, .32, .34)
  4.                                         scalar e3m_`var' = round(round(r(mean),.001),.1)
  5.                                         qui summarize `var' if inrange(timevar01, .999, 1.02)
  6.                                         scalar e1y_`var' = round(round(r(mean),.001),.1)
  7.                                         qui summarize `var' if inrange(timevar01, 2.99, 3.02)
  8.                                         scalar e3y_`var' = round(round(r(mean),.001),.1)
  9.                                         qui summarize `var' if inrange(timevar01,  4.999, 5.02)
 10.                                         scalar e5y_`var' = round(round(r(mean),.001),.1)
 11.          cap noi matrix ests_`var' = (`=scalar(e3m_`var')'\  `=scalar(e1y_`var')'\ `=scalar(scalar(e3y_`var'))'\ `=scalar(scalar(e5y_`
&gt; var'))')
 12.          matrix colnames ests_`var' = `var'
 13.          matrix rownames ests_`var' = 3_mths 1_yr 3_yrs 5_yrs
 14.                 }

. 
. matrix est_ds42 = (ests_flos_from2a_2_3y_83, ests_flos_from2a_2_lci_3y_83, ests_flos_from2a_2_uci_3y_83, ests_flos_from2b_2_3y_83, ests_f
&gt; los_from2b_2_lci_3y_83, ests_flos_from2b_2_uci_3y_83)

. matrix colnames est_ds42 = Out Out_lci Out_uci Res Res_lci Res_uci

. 
. esttab matrix(est_ds42) using &quot;${pathdata2}los_2nd_actual_st_3y_1st_pat_22_2corr3_83.html&quot;, replace 
(note: file C:/Users/CISS Fondecyt/Mi unidad/Alvacast/SISTRAT 2019 (github)/_mult_state_ags/los_2nd_actual_st_3y_1st_pat_22_2corr3_83.html 
&gt; not found)
(output written to C:/Users/CISS Fondecyt/Mi unidad/Alvacast/SISTRAT 2019 (github)/_mult_state_ags/los_2nd_actual_st_3y_1st_pat_22_2corr3_8
&gt; 3.html)

</code></pre>
<p>The lengths of stay are presented here:</p>
<table border="0" width="*">
<tr><td colspan=7><hr></td></tr>
<tr><td>            </td><td>    est_ds42</td><td>            </td><td>            </td><td>            </td><td>            </td><td>            </td></tr>
<tr><td>            </td><td>         Out</td><td>     Out_lci</td><td>     Out_uci</td><td>         Res</td><td>     Res_lci</td><td>     Res_uci</td></tr>
<tr><td colspan=7><hr></td></tr>
<tr><td>3_mths      </td><td>         115</td><td>         114</td><td>       115.9</td><td>       109.9</td><td>       108.1</td><td>       111.7</td></tr>
<tr><td>1_yr        </td><td>         345</td><td>       340.1</td><td>       350.1</td><td>       318.9</td><td>       310.5</td><td>       327.6</td></tr>
<tr><td>3_yrs       </td><td>       958.3</td><td>       935.8</td><td>       981.4</td><td>       848.5</td><td>       814.9</td><td>       883.4</td></tr>
<tr><td>5_yrs       </td><td>      1527.3</td><td>      1483.3</td><td>      1572.6</td><td>        1319</td><td>      1257.3</td><td>      1383.7</td></tr>
<tr><td colspan=7><hr></td></tr>
</table>
<h4><a href="#length-of-stay-first-patient-third-transition" id="length-of-stay-first-patient-third-transition">Length_of_stay_First patient_Third transition</a></h4>
<pre><code>. foreach var of varlist flos_from3a_3_3y_83 flos_from3a_3_lci_3y_83 flos_from3a_3_uci_3y_83 flos_from3b_3_3y_83 flos_from3b_3_lci_3y_83 fl
&gt; os_from3b_3_uci_3y_83 {
  2.         scalar variable = &quot;`var'&quot;
  3.                                         qui summarize `var' if inrange(timevar01, .32, .34)
  4.                                         scalar e3m_`var' = round(round(r(mean),.001),.1)
  5.                                         qui summarize `var' if inrange(timevar01, .999, 1.02)
  6.                                         scalar e3m_`var' = round(round(r(mean),.001),.1)
  7.                                         scalar e1y_`var' = round(round(r(mean),.001),.1)
  8.                                         qui summarize `var' if inrange(timevar01, 2.99, 3.02)
  9.                                         scalar e3y_`var' = round(round(r(mean),.001),.1)
 10.                                         qui summarize `var' if inrange(timevar01,  4.999, 5.02)
 11.                                         scalar e5y_`var' = round(round(r(mean),.001),.1)
 12.          cap noi matrix ests_`var' = (`=scalar(e3m_`var')'\  `=scalar(e1y_`var')'\ `=scalar(scalar(e3y_`var'))'\ `=scalar(scalar(e5y_`
&gt; var'))')
 13.          matrix colnames ests_`var' = `var'
 14.          matrix rownames ests_`var' = 3_mths 1_yr 3_yrs 5_yrs
 15.                 }

. 
. matrix est_ds32 = (ests_flos_from3a_3_3y_83, ests_flos_from3a_3_lci_3y_83, ests_flos_from3a_3_uci_3y_83, ests_flos_from3b_3_3y_83, ests_f
&gt; los_from3b_3_lci_3y_83, ests_flos_from3b_3_uci_3y_83)

. matrix colnames est_ds32 = Out Out_lci Out_uci Res Res_lci Res_uci

. 
. esttab matrix(est_ds32) using &quot;${pathdata2}los_3rd_actual_st_3y_1st_pat_22_2corr3_83.html&quot;, replace 
(output written to C:/Users/CISS Fondecyt/Mi unidad/Alvacast/SISTRAT 2019 (github)/_mult_state_ags/los_3rd_actual_st_3y_1st_pat_22_2corr3_8
&gt; 3.html)

</code></pre>
<p>The lengths of stay are presented here:</p>
<table border="0" width="*">
<tr><td colspan=7><hr></td></tr>
<tr><td>            </td><td>    est_ds32</td><td>            </td><td>            </td><td>            </td><td>            </td><td>            </td></tr>
<tr><td>            </td><td>         Out</td><td>     Out_lci</td><td>     Out_uci</td><td>         Res</td><td>     Res_lci</td><td>     Res_uci</td></tr>
<tr><td colspan=7><hr></td></tr>
<tr><td>3_mths      </td><td>       318.2</td><td>       310.3</td><td>       326.4</td><td>       282.5</td><td>       271.6</td><td>       293.9</td></tr>
<tr><td>1_yr        </td><td>       318.2</td><td>       310.3</td><td>       326.4</td><td>       282.5</td><td>       271.6</td><td>       293.9</td></tr>
<tr><td>3_yrs       </td><td>       847.2</td><td>       816.8</td><td>       878.8</td><td>       718.4</td><td>       681.1</td><td>       757.8</td></tr>
<tr><td>5_yrs       </td><td>      1321.9</td><td>      1266.8</td><td>      1379.5</td><td>      1094.9</td><td>      1030.6</td><td>      1163.2</td></tr>
<tr><td colspan=7><hr></td></tr>
</table>
<h2><a href="#">=============================================================================</a></h2>
<h2><a href="#">=============================================================================</a></h2>
<h1><a href="#export-tables" id="export-tables">Export tables</a></h1>
<pre><code>. *https://www.statalist.org/forums/forum/general-stata-discussion/general/1594605-twoway-graph-serset
. 
. 
. *####################################################################
. *#  Probabilities (In the next state) (1st pat)
. *###################################################################
. 
. 
. local x `&quot; &quot;2a_4_3y_83&quot; &quot;2a_4_lci_3y_83&quot;        &quot;2a_4_uci_3y_83&quot;        &quot;2b_4_3y_83&quot;    &quot;2b_4_lci_3y_83&quot;        &quot;2b_4_uci_3y_83&quot;&quot;' 

. local wx &quot;&quot;

. foreach l of local x {
  2.         local wx &quot;`wx' fprob_from`l'&quot;
  3.         }

. *di &quot;`wx'&quot;
. export excel timevar01  `wx' if inrange(timevar01 , .32, .34)|inrange(timevar01 , .999, 1.02)|inrange(timevar01 , 2.99, 3.02)|inrange(tim
&gt; evar01 , 4.999, 5.02) ///
&gt; using trans_prob_los_22_apr.xlsx, sheet(&quot;1pat_pr_corr3_3y_83&quot;, modify) cell(B1) //*save to Excel worksheetcell(start)  cell(A6) 
file trans_prob_los_22_apr.xlsx saved

. 
. local x `&quot; &quot;3a_5_3y_83&quot; &quot;3a_5_lci_3y_83&quot;        &quot;3a_5_uci_3y_83&quot;        &quot;3b_5_3y_83&quot;    &quot;3b_5_lci_3y_83&quot;        &quot;3b_5_uci_3y_83&quot;&quot;' 

. local wx &quot;&quot;

. foreach l of local x {
  2.         local wx &quot;`wx' fprob_from`l'&quot;
  3.         }

. *di &quot;`wx'&quot;
. export excel timevar01  `wx' if inrange(timevar01 , .32, .34)|inrange(timevar01 , .999, 1.02)|inrange(timevar01 , 2.99, 3.02)|inrange(tim
&gt; evar01 , 4.999, 5.02) ///
&gt; using trans_prob_los_22_apr.xlsx, sheet(&quot;1pat_pr_corr3_3y_83&quot;, modify) cell(B6) //*save to Excel worksheetcell(start)  cell(A6) 
file trans_prob_los_22_apr.xlsx saved

. 
. 
. *####################################################################
. *#  LOS (In the current state) (1st pat)
. *###################################################################
. 
. 
. local x `&quot; &quot;2a_2_3y_83&quot; &quot;2a_2_lci_3y_83&quot;        &quot;2a_2_uci_3y_83&quot;        &quot;2b_2_3y_83&quot;    &quot;2b_2_lci_3y_83&quot;        &quot;2b_2_uci_3y_83&quot;&quot;' 

. local wx &quot;&quot;

. foreach l of local x {
  2.         local wx &quot;`wx' flos_from`l'&quot;
  3.         }

. export excel timevar01  `wx' if inrange(timevar01 , .32, .34)|inrange(timevar01 , .999, 1.02)|inrange(timevar01 , 2.99, 3.02)|inrange(tim
&gt; evar01 , 4.999, 5.02) ///
&gt; using trans_prob_los_22_apr.xlsx, sheet(&quot;1pat_los_act_st_corr3_3y_83&quot;, modify) cell(B6) //*save to Excel worksheetcell(start)  cell(A6) 
file trans_prob_los_22_apr.xlsx saved

. 
. local x `&quot; &quot;3a_3_3y_83&quot; &quot;3a_3_lci_3y_83&quot;        &quot;3a_3_uci_3y_83&quot;        &quot;3b_3_3y_83&quot;    &quot;3b_3_lci_3y_83&quot;        &quot;3b_3_uci_3y_83&quot;&quot;' 

. local wx &quot;&quot;

. foreach l of local x {
  2.         local wx &quot;`wx' flos_from`l'&quot;
  3.         }

. export excel timevar01  `wx' if inrange(timevar01 , .32, .34)|inrange(timevar01 , .999, 1.02)|inrange(timevar01 , 2.99, 3.02)|inrange(tim
&gt; evar01 , 4.999, 5.02) ///
&gt; using trans_prob_los_22_apr.xlsx, sheet(&quot;1pat_los_act_st_corr3_3y_83&quot;, modify) cell(B10) //*save to Excel worksheetcell(start)  cell(A6) 
file trans_prob_los_22_apr.xlsx saved

. 
</code></pre>
<h2><a href="#">=============================================================================</a></h2>
<h2><a href="#">=============================================================================</a></h2>
